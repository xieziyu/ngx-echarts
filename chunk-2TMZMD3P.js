import{B as L,C as E,E as _,I as z,J as x,c as l,h as g,i as y,j as m,k as u,ka as d,l as b,la as s,p as v,q as w,s as O,t as S,u as h,ya as r,za as C}from"./chunk-Z3IVGXVU.js";function M(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");p(i,n);function e(){this.constructor=i}i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var p,T=l(()=>{p=function(i,n){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},p(i,n)}});var P,R,j=l(()=>{P=(function(){function i(n){this.colorStops=n||[]}return i.prototype.addColorStop=function(n,e){this.colorStops.push({offset:n,color:e})},i})(),R=P});var A,ee,N=l(()=>{T();j();A=(function(i){M(n,i);function n(e,t,a,c,F,G){var o=i.call(this,F)||this;return o.x=e??0,o.y=t??0,o.x2=a??1,o.y2=c??0,o.type="linear",o.global=G||!1,o}return n})(R),ee=A});var D=new S("NGX_ECHARTS_CONFIG"),f=class{constructor(){this.subject=new u(1),this.subscriptions=new g}doFilter(n){this.subject.next(n)}dispose(){this.subscriptions.unsubscribe()}notEmpty(n,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[n]){let a=t[n].currentValue;a!=null&&e(a)}}))}has(n,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[n]){let a=t[n].currentValue;e(a)}}))}notFirst(n,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[n]&&!t[n].isFirstChange()){let a=t[n].currentValue;e(a)}}))}notFirstAndEmpty(n,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[n]&&!t[n].isFirstChange()){let a=t[n].currentValue;a!=null&&e(a)}}))}},X=(()=>{class i{constructor(){this.el=h(_),this.ngZone=h(L),this.config=h(D),this.options=s(null),this.theme=s(this.config.theme??null),this.initOpts=s(null),this.merge=s(null),this.autoResize=s(!0),this.loading=s(!1),this.loadingType=s("default"),this.loadingOpts=s(null),this.chartInit=d(),this.optionsError=d(),this.chartClick=r(this.createLazyEvent("click")),this.chartDblClick=r(this.createLazyEvent("dblclick")),this.chartMouseDown=r(this.createLazyEvent("mousedown")),this.chartMouseMove=r(this.createLazyEvent("mousemove")),this.chartMouseUp=r(this.createLazyEvent("mouseup")),this.chartMouseOver=r(this.createLazyEvent("mouseover")),this.chartMouseOut=r(this.createLazyEvent("mouseout")),this.chartGlobalOut=r(this.createLazyEvent("globalout")),this.chartContextMenu=r(this.createLazyEvent("contextmenu")),this.chartHighlight=r(this.createLazyEvent("highlight")),this.chartDownplay=r(this.createLazyEvent("downplay")),this.chartSelectChanged=r(this.createLazyEvent("selectchanged")),this.chartLegendSelectChanged=r(this.createLazyEvent("legendselectchanged")),this.chartLegendSelected=r(this.createLazyEvent("legendselected")),this.chartLegendUnselected=r(this.createLazyEvent("legendunselected")),this.chartLegendLegendSelectAll=r(this.createLazyEvent("legendselectall")),this.chartLegendLegendInverseSelect=r(this.createLazyEvent("legendinverseselect")),this.chartLegendScroll=r(this.createLazyEvent("legendscroll")),this.chartDataZoom=r(this.createLazyEvent("datazoom")),this.chartDataRangeSelected=r(this.createLazyEvent("datarangeselected")),this.chartGraphRoam=r(this.createLazyEvent("graphroam")),this.chartGeoRoam=r(this.createLazyEvent("georoam")),this.chartTreeRoam=r(this.createLazyEvent("treeroam")),this.chartTimelineChanged=r(this.createLazyEvent("timelinechanged")),this.chartTimelinePlayChanged=r(this.createLazyEvent("timelineplaychanged")),this.chartRestore=r(this.createLazyEvent("restore")),this.chartDataViewChanged=r(this.createLazyEvent("dataviewchanged")),this.chartMagicTypeChanged=r(this.createLazyEvent("magictypechanged")),this.chartGeoSelectChanged=r(this.createLazyEvent("geoselectchanged")),this.chartGeoSelected=r(this.createLazyEvent("geoselected")),this.chartGeoUnselected=r(this.createLazyEvent("geounselected")),this.chartAxisAreaSelected=r(this.createLazyEvent("axisareaselected")),this.chartBrush=r(this.createLazyEvent("brush")),this.chartBrushEnd=r(this.createLazyEvent("brushend")),this.chartBrushSelected=r(this.createLazyEvent("brushselected")),this.chartGlobalCursorTaken=r(this.createLazyEvent("globalcursortaken")),this.chartRendered=r(this.createLazyEvent("rendered")),this.chartFinished=r(this.createLazyEvent("finished")),this.animationFrameID=null,this.chart$=new u(1),this.resize$=new m,this.changeFilter=new f,this.resizeObFired=!1,this.echarts=this.config.echarts}ngOnChanges(e){this.changeFilter.doFilter(e)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(w(100,b,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize()&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(e=>{for(let t of e)t.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",e=>this.onOptionsChange(e)),this.changeFilter.notFirstAndEmpty("merge",e=>this.setOption(e)),this.changeFilter.has("loading",e=>this.toggleLoading(!!e)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart?e?this.chart.showLoading(this.loadingType(),this.loadingOpts()):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(t=>e?t.showLoading(this.loadingType(),this.loadingOpts()):t.hideLoading())}setOption(e,t){if(this.chart)try{this.chart.setOption(e,t)}catch(a){console.error(a),this.optionsError.emit(a)}}async refreshChart(){this.dispose(),await this.initChart()}createChart(){let e=this.el.nativeElement;if(window&&window.getComputedStyle){let t=window.getComputedStyle(e,null).getPropertyValue("height");(!t||t==="0px")&&(!e.style.height||e.style.height==="0px")&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:a})=>a(e,this.theme()??this.config?.theme,this.initOpts())))}async initChart(){await this.onOptionsChange(this.options());let e=this.merge();e&&this.chart&&this.setOption(e)}async onOptionsChange(e){e&&(this.chart?this.setOption(this.options(),!0):(this.chart=await this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options(),!0)))}createLazyEvent(e){return C(this.chartInit).pipe(v(t=>new y(a=>(t.on(e,c=>this.ngZone.run(()=>a.next(c))),()=>{this.chart&&(this.chart.isDisposed()||t.off(e))}))))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=x({type:i,selectors:[["echarts"],["","echarts",""]],inputs:{options:[1,"options"],theme:[1,"theme"],initOpts:[1,"initOpts"],merge:[1,"merge"],autoResize:[1,"autoResize"],loading:[1,"loading"],loadingType:[1,"loadingType"],loadingOpts:[1,"loadingOpts"]},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[E]})}}return i})();function I(i){return{provide:D,useValue:i}}var J=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[I(e)]}}static forChild(){return{ngModule:i}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=z({type:i})}static{this.\u0275inj=O({})}}return i})();export{X as a,I as b,J as c,M as d,T as e,R as f,j as g,ee as h,N as i};
