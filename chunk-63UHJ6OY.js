import{A as E,C as _,G as z,H as C,L as x,c as u,h as y,i as m,j as b,k as d,ka as f,l as v,la as o,p as w,q as O,s as S,t as L,u as h,ya as r,za as T}from"./chunk-GKCWJT7B.js";function R(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");g(i,e);function a(){this.constructor=i}i.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}var g,F=u(()=>{g=function(i,e){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])},g(i,e)}});var P,D,M=u(()=>{P=function(){function i(e){this.colorStops=e||[]}return i.prototype.addColorStop=function(e,a){this.colorStops.push({offset:e,color:a})},i}(),D=P});var A,tt,B=u(()=>{F();M();A=function(i){R(e,i);function e(a,t,n,s,l,G){var c=i.call(this,l)||this;return c.x=a??0,c.y=t??0,c.x2=n??1,c.y2=s??0,c.type="linear",c.global=G||!1,c}return e}(D),tt=A});var j=new L("NGX_ECHARTS_CONFIG"),p=class{constructor(){this.subject=new d(1),this.subscriptions=new y}doFilter(e){this.subject.next(e)}dispose(){this.subscriptions.unsubscribe()}notEmpty(e,a){this.subscriptions.add(this.subject.subscribe(t=>{if(t[e]){let n=t[e].currentValue;n!=null&&a(n)}}))}has(e,a){this.subscriptions.add(this.subject.subscribe(t=>{if(t[e]){let n=t[e].currentValue;a(n)}}))}notFirst(e,a){this.subscriptions.add(this.subject.subscribe(t=>{if(t[e]&&!t[e].isFirstChange()){let n=t[e].currentValue;a(n)}}))}notFirstAndEmpty(e,a){this.subscriptions.add(this.subject.subscribe(t=>{if(t[e]&&!t[e].isFirstChange()){let n=t[e].currentValue;n!=null&&a(n)}}))}},X=(()=>{let e=class e{constructor(){this.el=h(_),this.ngZone=h(x),this.config=h(j),this.options=o(null),this.theme=o(this.config.theme??null),this.initOpts=o(null),this.merge=o(null),this.autoResize=o(!0),this.loading=o(!1),this.loadingType=o("default"),this.loadingOpts=o(null),this.chartInit=f(),this.optionsError=f(),this.chartClick=r(this.createLazyEvent("click")),this.chartDblClick=r(this.createLazyEvent("dblclick")),this.chartMouseDown=r(this.createLazyEvent("mousedown")),this.chartMouseMove=r(this.createLazyEvent("mousemove")),this.chartMouseUp=r(this.createLazyEvent("mouseup")),this.chartMouseOver=r(this.createLazyEvent("mouseover")),this.chartMouseOut=r(this.createLazyEvent("mouseout")),this.chartGlobalOut=r(this.createLazyEvent("globalout")),this.chartContextMenu=r(this.createLazyEvent("contextmenu")),this.chartHighlight=r(this.createLazyEvent("highlight")),this.chartDownplay=r(this.createLazyEvent("downplay")),this.chartSelectChanged=r(this.createLazyEvent("selectchanged")),this.chartLegendSelectChanged=r(this.createLazyEvent("legendselectchanged")),this.chartLegendSelected=r(this.createLazyEvent("legendselected")),this.chartLegendUnselected=r(this.createLazyEvent("legendunselected")),this.chartLegendLegendSelectAll=r(this.createLazyEvent("legendselectall")),this.chartLegendLegendInverseSelect=r(this.createLazyEvent("legendinverseselect")),this.chartLegendScroll=r(this.createLazyEvent("legendscroll")),this.chartDataZoom=r(this.createLazyEvent("datazoom")),this.chartDataRangeSelected=r(this.createLazyEvent("datarangeselected")),this.chartGraphRoam=r(this.createLazyEvent("graphroam")),this.chartGeoRoam=r(this.createLazyEvent("georoam")),this.chartTreeRoam=r(this.createLazyEvent("treeroam")),this.chartTimelineChanged=r(this.createLazyEvent("timelinechanged")),this.chartTimelinePlayChanged=r(this.createLazyEvent("timelineplaychanged")),this.chartRestore=r(this.createLazyEvent("restore")),this.chartDataViewChanged=r(this.createLazyEvent("dataviewchanged")),this.chartMagicTypeChanged=r(this.createLazyEvent("magictypechanged")),this.chartGeoSelectChanged=r(this.createLazyEvent("geoselectchanged")),this.chartGeoSelected=r(this.createLazyEvent("geoselected")),this.chartGeoUnselected=r(this.createLazyEvent("geounselected")),this.chartAxisAreaSelected=r(this.createLazyEvent("axisareaselected")),this.chartBrush=r(this.createLazyEvent("brush")),this.chartBrushEnd=r(this.createLazyEvent("brushend")),this.chartBrushSelected=r(this.createLazyEvent("brushselected")),this.chartGlobalCursorTaken=r(this.createLazyEvent("globalcursortaken")),this.chartRendered=r(this.createLazyEvent("rendered")),this.chartFinished=r(this.createLazyEvent("finished")),this.animationFrameID=null,this.chart$=new d(1),this.resize$=new b,this.changeFilter=new p,this.resizeObFired=!1,this.echarts=this.config.echarts}ngOnChanges(t){this.changeFilter.doFilter(t)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(O(100,v,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize()&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(t=>{for(let n of t)n.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",t=>this.onOptionsChange(t)),this.changeFilter.notFirstAndEmpty("merge",t=>this.setOption(t)),this.changeFilter.has("loading",t=>this.toggleLoading(!!t)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart?t?this.chart.showLoading(this.loadingType(),this.loadingOpts()):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(n=>t?n.showLoading(this.loadingType(),this.loadingOpts()):n.hideLoading())}setOption(t,n){if(this.chart)try{this.chart.setOption(t,n)}catch(s){console.error(s),this.optionsError.emit(s)}}async refreshChart(){this.dispose(),await this.initChart()}createChart(){let t=this.el.nativeElement;if(window&&window.getComputedStyle){let n=window.getComputedStyle(t,null).getPropertyValue("height");(!n||n==="0px")&&(!t.style.height||t.style.height==="0px")&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:s})=>s(t,this.theme()??this.config?.theme,this.initOpts())))}async initChart(){await this.onOptionsChange(this.options());let t=this.merge();t&&this.chart&&this.setOption(t)}async onOptionsChange(t){t&&(this.chart?this.setOption(this.options(),!0):(this.chart=await this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options(),!0)))}createLazyEvent(t){return T(this.chartInit).pipe(w(n=>new m(s=>(n.on(t,l=>this.ngZone.run(()=>s.next(l))),()=>{this.chart&&(this.chart.isDisposed()||n.off(t))}))))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=C({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:[1,"options"],theme:[1,"theme"],initOpts:[1,"initOpts"],merge:[1,"merge"],autoResize:[1,"autoResize"],loading:[1,"loading"],loadingType:[1,"loadingType"],loadingOpts:[1,"loadingOpts"]},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[E]});let i=e;return i})();function I(i){return{provide:j,useValue:i}}var J=(()=>{let e=class e{static forRoot(t){return{ngModule:e,providers:[I(t)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=z({type:e}),e.\u0275inj=S({});let i=e;return i})();export{X as a,I as b,J as c,R as d,F as e,D as f,M as g,tt as h,B as i};
